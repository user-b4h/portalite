<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portalite | シンプルなポータルアプリ</title>
  <meta name="description" content="Portaliteは、ウェブ検索、天気予報、最新ニュースを一つの画面で手軽に確認できるシンプルなポータルアプリです。シンプルで使いやすいデザインで、PCとスマホどちらでも快適にご利用いただけます。">
  <meta name="keywords" content="ポータルサイト, 検索, 天気, ニュース, webアプリ, シンプル, 便利">
  <meta name="robots" content="noindex, nofollow">
  <link rel="icon" href="https://portalite.f5.si/icon/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="https://portalite.f5.si/icon/apple-touch-icon.png">
  <link rel="manifest" href="https://portalite.f5.si/manifest.json">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body { font-family: Inter, sans-serif; background:#f3f4f6; color:#1f2937; }
    .card { background:#fff; }
    
    @media (prefers-color-scheme: dark) {
      body { background:#1f2937; color:#e5e7eb; }
      .card { background:#374151; }
    }

    input[type="search"]::-webkit-search-cancel-button {
        -webkit-appearance: none;
    }

    ::-webkit-scrollbar {
      width: 12px;
    }
    ::-webkit-scrollbar-track {
      background: #e2e8f0;
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb {
      background-color: #9ca3af;
      border-radius: 10px;
      border: 3px solid #e2e8f0;
    }
    ::-webkit-scrollbar-thumb:hover {
      background-color: #6b7280;
    }

    @media (prefers-color-scheme: dark) {
      ::-webkit-scrollbar-track {
        background: #1f2937;
      }
      ::-webkit-scrollbar-thumb {
        background-color: #4b5563;
        border: 3px solid #1f2937;
      }
      ::-webkit-scrollbar-thumb:hover {
        background-color: #6b7280;
      }
    }
    
    body {
      scrollbar-width: thin;
      scrollbar-color: #9ca3af #e2e8f0;
    }
    @media (prefers-color-scheme: dark) {
      body {
        scrollbar-color: #4b5563 #1f2937;
      }
    }
    
    #search-overlay {
      position: fixed;
      top:0; left:0; width:100%; height:100%;
      background: #fff;
      z-index: 9999;
      display: none;
      flex-direction: column;
    }
    @media (prefers-color-scheme: dark) {
      #search-overlay { background: #1f2937; }
    }

    .news-item {
      padding: 1rem;
      transition-property: background-color, transform;
      transition-duration: 300ms;
    }
    .news-item:not(:last-child) {
      border-bottom: 2px solid #e2e8f0;
    }
    .news-item:hover {
      background-color: #f1f5f9;
      transform: translateY(-2px);
    }
    @media (prefers-color-scheme: dark) {
      .news-item:not(:last-child) {
        border-bottom: 2px solid #4a5568;
      }
      .news-item:hover {
        background-color: #2d3748;
      }
    }

    .clear-button {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      color: #9ca3af;
      cursor: pointer;
      font-size: 1.5rem;
      z-index: 20;
    }
    .clear-button:hover {
      color: #6b7280;
    }

    .history-delete-button {
        color: #9ca3af;
        margin-left: auto;
        padding: 0.5rem;
        cursor: pointer;
    }
    .history-delete-button:hover {
        color: #ef4444;
    }

    .link-item {
        display: flex;
        align-items: center;
        padding: 1rem 1.25rem;
        background-color: #f7fafc;
        border-radius: 0.75rem;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        transition-property: all;
        transition-duration: 300ms;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    .link-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        background-color: #e2e8f0;
    }
    @media (prefers-color-scheme: dark) {
        .link-item {
            background-color: #2d3748;
            box-shadow: none;
        }
        .link-item:hover {
            background-color: #4a5568;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.12);
        }
    }
    
    @keyframes slideInFromTop {
      0% {
        transform: translateY(-100%);
      }
      100% {
        transform: translateY(0);
      }
    }

    .fixed-search {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
        background-color: #f3f4f6;
        padding: 1rem;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transform: translateY(-100%);
        opacity: 0;
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        pointer-events: none;
    }
    .fixed-search.is-visible {
        transform: translateY(0);
        opacity: 1;
        pointer-events: auto;
    }
    @media (prefers-color-scheme: dark) {
        .fixed-search {
            background-color: #1f2937;
            box-shadow: 0 2px 5px rgba(255,255,255,0.1);
        }
    }
    @media (min-width: 640px) {
        .fixed-search {
            display: none;
        }
    }
  </style>
</head>
<body class="p-4 sm:p-8 flex flex-col items-center min-h-screen text-base sm:text-lg">

  <div id="fixed-search-wrapper" class="fixed-search w-full">
    <div class="w-full max-w-4xl mx-auto">
        <form action="#" id="search-form-fixed" onsubmit="event.preventDefault(); doSearch(document.getElementById('search-input-fixed').value.trim());">
            <div class="input-group flex space-x-2 items-center">
                <div class="relative flex-grow min-w-0">
                    <input id="search-input-fixed" type="search" placeholder="検索キーワードを入力..."
                           class="w-full p-3 pr-12 rounded-xl border border-gray-300 text-base focus:outline-none focus:ring-2 focus:ring-blue-500
                                  dark:bg-gray-800 dark:border-gray-500 dark:text-gray-100 dark:placeholder-gray-400"
                           autocomplete="off">
                    <i id="clear-button-fixed" class="fas fa-times-circle clear-button hidden"></i>
                </div>
                <button id="search-button-fixed" type="submit"
                        class="bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700 transition duration-300 shadow-md flex-shrink-0 text-base">
                    検索
                </button>
            </div>
        </form>
    </div>
  </div>

  <div class="w-full max-w-4xl space-y-8">
    <header class="text-center">
      <h1 class="text-5xl sm:text-6xl font-bold mb-2">Portalite</h1>
      <p class="text-xl">シンプルなポータルアプリ</p>
    </header>

    <section class="card p-6 rounded-2xl shadow-lg relative">
      <h2 class="text-2xl sm:text-3xl font-semibold mb-4">ウェブ検索</h2>
      <div id="search-container-wrapper">
        <form action="#" id="search-form-main" onsubmit="event.preventDefault(); doSearch(document.getElementById('search-input-main').value.trim());">
          <div class="input-group flex space-x-2 items-center">
            <div class="relative flex-grow min-w-0">
              <input id="search-input-main" type="search" placeholder="検索キーワードを入力..."
                     class="w-full p-3 pr-12 rounded-xl border border-gray-300 text-base focus:outline-none focus:ring-2 focus:ring-blue-500
                            dark:bg-gray-800 dark:border-gray-500 dark:text-gray-100 dark:placeholder-gray-400"
                     autocomplete="off">
              <i id="clear-button-main" class="fas fa-times-circle clear-button hidden"></i>
              <div id="suggestions-container-main"
                   class="absolute z-10 w-full mt-2 bg-white dark:bg-gray-700 rounded-xl shadow-lg border border-gray-200 dark:border-gray-600 hidden text-base sm:text-lg">
              </div>
            </div>
            <button id="search-button-main" type="submit"
                    class="bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700 transition duration-300 shadow-md flex-shrink-0 text-base">
              検索
            </button>
          </div>
        </form>
      </div>
    </section>

    <section class="card p-6 rounded-2xl shadow-lg">
      <h2 class="text-2xl sm:text-3xl font-semibold mb-4">よく使うサイト</h2>
      <div id="links-container" class="space-y-4">
        <a href="https://mypage.transit-jr.net/my_chart/sasaki-asuka/" target="_blank" rel="noopener noreferrer" class="link-item">
          <span class="font-medium text-gray-800 dark:text-gray-200 text-base sm:text-lg">あしあと帳。</span>
        </a>
        <a href="https://ekibus.city.sapporo.jp/" target="_blank" rel="noopener noreferrer" class="link-item">
          <span class="font-medium text-gray-800 dark:text-gray-200 text-base sm:text-lg">交通案内</span>
        </a>
      </div>
    </section>

    <section class="card p-6 rounded-2xl shadow-lg">
      <h2 class="text-2xl sm:text-3xl font-semibold mb-4">札幌の天気</h2>
      <div id="weather-container" class="grid sm:grid-cols-3 gap-4 text-center text-base sm:text-lg">
        <div class="text-center col-span-3">天気情報を取得中...</div>
      </div>
    </section>

    <section class="card p-6 rounded-2xl shadow-lg">
      <h2 class="text-2xl sm:text-3xl font-semibold mb-4">最新ニュース (NHK)</h2>
      <div id="news-container" class="space-y-4 text-base sm:text-lg">
        <div class="text-center">ニュースを取得中...</div>
      </div>
    </section>
    
    <footer class="text-center text-gray-500 dark:text-gray-400 text-sm sm:text-base mt-8">
      <span id="copyright-text"></span>
    </footer>

  </div>

  <div id="search-overlay" class="hidden">
    <div class="p-4 flex items-center space-x-2 border-b border-gray-200 dark:border-gray-600">
      <form action="#" id="search-form-overlay" onsubmit="event.preventDefault(); doSearch(document.getElementById('search-input-overlay').value.trim());" class="relative flex-grow min-w-0 flex items-center space-x-2">
        <div class="relative flex-grow min-w-0">
          <input id="search-input-overlay" type="search"
                 class="w-full p-3 pr-12 rounded-xl border border-gray-300 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500
                        dark:bg-gray-800 dark:border-gray-500 dark:text-gray-100 dark:placeholder-gray-400"
                 placeholder="検索キーワード..." autocomplete="off">
          <i id="clear-button-overlay" class="fas fa-times-circle clear-button hidden"></i>
        </div>
        <button id="overlay-search-button" type="submit"
                class="flex-shrink-0 bg-blue-600 text-white px-3 py-2 rounded-xl hover:bg-blue-700 transition duration-300 text-lg">
          検索
        </button>
      </form>
      <button id="cancel-button"
              class="flex-shrink-0 text-blue-500 font-semibold text-lg ml-1">
        キャンセル
      </button>
    </div>
    <div id="suggestions-container-overlay" class="flex-grow overflow-y-auto p-2 text-lg"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const weatherContainer = document.getElementById('weather-container');
      const newsContainer = document.getElementById('news-container');
      const mainInput = document.getElementById('search-input-main');
      const mainButton = document.getElementById('search-button-main');
      const mainSuggestions = document.getElementById('suggestions-container-main');
      const mainClearButton = document.getElementById('clear-button-main');
      const overlay = document.getElementById('search-overlay');
      const overlayInput = document.getElementById('search-input-overlay');
      const overlaySearchButton = document.getElementById('overlay-search-button');
      const cancelButton = document.getElementById('cancel-button');
      const overlaySuggestions = document.getElementById('suggestions-container-overlay');
      const overlayClearButton = document.getElementById('clear-button-overlay');
      const weatherApiUrl = 'https://weather.tsukumijima.net/api/forecast?city=016010';
      const newsRssUrl = 'https://www.nhk.or.jp/rss/news/cat0.xml';
      const HISTORY_KEY = 'search-history';
      const HISTORY_LIMIT = 10;
      let lastScrollPosition = 0;

      const copyrightText = document.getElementById('copyright-text');
      const currentYear = new Date().getFullYear();
      copyrightText.textContent = `Copyright © ${currentYear} Portalite. All rights reserved.`;

      async function fetchWeather() {
        try {
          weatherContainer.innerHTML = '<div class="text-center col-span-3">天気情報を取得中...</div>';
          const r = await fetch(weatherApiUrl);
          const data = await r.json();
          weatherContainer.innerHTML = '';
          data.forecasts.slice(0, 3).forEach(forecast => {
            const iconUrl = forecast.image.url;
            const el = document.createElement('div');
            el.className = 'p-4 rounded-xl shadow-inner card';
            el.innerHTML = `
              <p class="text-lg sm:text-xl font-bold">${forecast.dateLabel}</p>
              <img src="${iconUrl}" alt="${forecast.telop}" class="w-16 h-16 mx-auto my-2" onerror="this.src='https://placehold.co/64x64/CCCCCC/FFFFFF?text=No+Icon';">
              <p class="text-base text-gray-500 dark:text-gray-400 mb-2">${forecast.telop}</p>
              <div class="flex justify-center items-center space-x-2 text-base">
                <span class="text-blue-500">最低: ${forecast.temperature.min?.celsius || '--'}°C</span>
                <span class="text-red-500">最高: ${forecast.temperature.max?.celsius || '--'}°C</span>
              </div>
            `;
            weatherContainer.appendChild(el);
          });
        } catch {}
      }

      async function fetchNews() {
        try {
          newsContainer.innerHTML = '<div class="text-center">ニュースを取得中...</div>';
          const r = await fetch(newsRssUrl);
          const txt = await r.text();
          const xml = new DOMParser().parseFromString(txt, 'text/xml');
          const items = Array.from(xml.querySelectorAll('item')).map(item => {
            const title = item.querySelector('title')?.textContent;
            const description = item.querySelector('description')?.textContent;
            const link = item.querySelector('link')?.textContent;
            const pubDate = item.querySelector('pubDate')?.textContent;
            return { title, description, link, pubDate };
          }).filter(item => item.title && item.link && item.pubDate);

          items.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

          newsContainer.innerHTML = '';
          items.forEach(item => {
            let formattedDate = '';
            if (item.pubDate) {
              const d = new Date(item.pubDate);
              const year = d.getFullYear();
              const month = d.getMonth() + 1;
              const day = d.getDate();
              const hours = String(d.getHours()).padStart(2, '0');
              const minutes = String(d.getMinutes()).padStart(2, '0');
              formattedDate = `${year}年${month}月${day}日 ${hours}:${minutes}`;
            }

            const a = document.createElement('a');
            a.href = item.link;
            a.target = '_blank';
            a.rel = 'noopener noreferrer';
            a.className = 'news-item block transition-colors duration-300';
            a.innerHTML = `
              <p class="font-semibold text-lg sm:text-xl">${item.title}</p>
              <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">${formattedDate}</p>
              ${item.description ? `<p class="text-base text-gray-600 dark:text-gray-400 mt-1">${item.description}</p>` : ''}
            `;
            newsContainer.appendChild(a);
          });
        } catch {}
      }

      function jsonp(url, params = {}, timeout = 5000) {
        return new Promise((resolve, reject) => {
          const callbackName = 'jsonp_cb_' + Date.now();
          params.callback = callbackName;
          const query = Object.keys(params).map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`).join('&');
          const fullUrl = url + (url.includes('?') ? '&' : '?') + query;
          const script = document.createElement('script');
          script.src = fullUrl;
          let timer = setTimeout(() => { cleanup(); reject(new Error('JSONP timeout')); }, timeout);
          function cleanup() {
            clearTimeout(timer);
            try { delete window[callbackName]; } catch { window[callbackName] = undefined; }
            if (script.parentNode) script.parentNode.removeChild(script);
          }
          window[callbackName] = (data) => { cleanup(); resolve(data); };
          script.onerror = () => { cleanup(); reject(new Error('JSONP script error')); };
          document.body.appendChild(script);
        });
      }

      async function fetchGoogleSuggestionsJSONP(query) {
        if (!query) return [];
        const url = 'https://suggestqueries.google.com/complete/search';
        try {
          const data = await jsonp(url, { client: 'firefox', hl: 'ja', q: query }, 4000);
          if (Array.isArray(data) && Array.isArray(data[1])) {
            return data[1].map(item => typeof item === 'string' ? item : (Array.isArray(item) ? item[0] : String(item)));
          }
          return [];
        } catch { return []; }
      }

      function renderSuggestions(list, container, isHistory = false) {
        container.innerHTML = '';
        if (!list || list.length === 0) { container.classList.add('hidden'); return; }
        container.classList.remove('hidden');
        list.forEach((s, index) => {
          const item = document.createElement('div');
          if (isHistory) {
            item.className = `p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-150 flex items-center justify-between group`;
            item.addEventListener('click', () => {
                if (container === overlaySuggestions) {
                  overlayInput.value = s;
                  toggleClearButton(overlayInput.value, overlayClearButton);
                }
                else {
                  mainInput.value = s;
                  toggleClearButton(mainInput.value, mainClearButton);
                }
                doSearch(s);
            });
            const searchIcon = document.createElement('div');
            searchIcon.className = 'flex items-center flex-grow';
            searchIcon.innerHTML = `<i class="fas fa-history text-gray-400 mr-2"></i><span>${s}</span>`;
            item.appendChild(searchIcon);
            const deleteButton = document.createElement('i');
            deleteButton.className = 'fas fa-times history-delete-button';
            deleteButton.addEventListener('click', (e) => {
              e.stopPropagation();
              deleteSearchHistory(s);
              renderSearchHistory(container);
            });
            item.appendChild(deleteButton);
          } else {
            item.className = `p-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-150 flex items-center`;
            item.innerHTML = `<i class="fas fa-search text-gray-400 mr-2"></i><span>${s}</span>`;
            item.addEventListener('click', () => {
              if (container === overlaySuggestions) {
                overlayInput.value = s;
                toggleClearButton(overlayInput.value, overlayClearButton);
              }
              else {
                mainInput.value = s;
                toggleClearButton(mainInput.value, mainClearButton);
              }
              doSearch(s);
            });
          }
          if (index < list.length - 1) {
            item.classList.add('border-b', 'border-gray-200', 'dark:border-gray-600');
          }
          container.appendChild(item);
        });
      }

      function getSearchHistory() {
        try {
          const history = localStorage.getItem(HISTORY_KEY);
          return history ? JSON.parse(history) : [];
        } catch {
          return [];
        }
      }

      function saveSearchHistory(query) {
        if (!query) return;
        let history = getSearchHistory();
        history = history.filter(item => item !== query);
        history.unshift(query);
        if (history.length > HISTORY_LIMIT) {
          history = history.slice(0, HISTORY_LIMIT);
        }
        localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
      }

      function deleteSearchHistory(queryToDelete) {
          let history = getSearchHistory();
          history = history.filter(item => item !== queryToDelete);
          localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
      }

      function renderSearchHistory(container) {
        const history = getSearchHistory();
        renderSuggestions(history, container, true);
      }

      function doSearch(q) {
        if (!q) return;
        saveSearchHistory(q);
        window.open(`https://search.yahoo.co.jp/search?p=${encodeURIComponent(q)}`, '_blank');
        closeOverlay();
        mainSuggestions.classList.add('hidden');
      }

      function debounce(fn, wait=200) {
        let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), wait); };
      }

      const onInput = debounce(async (evt, container) => {
        const q = evt.target.value.trim();
        if (!q) { 
          renderSearchHistory(container); 
          return;
        }
        const suggestions = await fetchGoogleSuggestionsJSONP(q);
        renderSuggestions(suggestions, container);
      }, 180);

      function toggleClearButton(query, clearButton) {
        if (query.length > 0) {
          clearButton.classList.remove('hidden');
        } else {
          clearButton.classList.add('hidden');
        }
      }

      function openMobileSearchOverlay(query = '') {
        lastScrollPosition = window.scrollY;
        overlay.style.display = 'flex';
        overlay.classList.remove('hidden');
        overlayInput.value = query;
        if (query) {
          onInput({ target: { value: query } }, overlaySuggestions);
        } else {
          renderSearchHistory(overlaySuggestions);
        }
        toggleClearButton(overlayInput.value, overlayClearButton);
        overlayInput.focus();
      }

      mainInput.addEventListener('focus', () => {
        if (window.innerWidth <= 768) {
          openMobileSearchOverlay(mainInput.value);
        } else {
          if (mainInput.value.trim() === '') {
            renderSearchHistory(mainSuggestions);
          }
        }
        toggleClearButton(mainInput.value, mainClearButton);
      });
      mainInput.addEventListener('blur', () => {
        if (window.innerWidth > 768) {
          mainSuggestions.classList.add('hidden');
          toggleClearButton(mainInput.value, mainClearButton);
        }
      });
      mainInput.addEventListener('input', (e) => {
        onInput(e, mainSuggestions);
        toggleClearButton(mainInput.value, mainClearButton);
      });
      mainSuggestions.addEventListener('mousedown', (e) => {
        e.preventDefault();
      });
      mainButton.addEventListener('click', () => doSearch(mainInput.value.trim()));
      mainClearButton.addEventListener('click', () => {
        mainInput.value = '';
        if (window.innerWidth > 768) {
          mainInput.focus();
          mainSuggestions.classList.add('hidden');
        }
        toggleClearButton(mainInput.value, mainClearButton);
        renderSearchHistory(mainSuggestions);
      });
      
      overlayInput.addEventListener('focus', () => {
        if (overlayInput.value.trim() === '') {
          renderSearchHistory(overlaySuggestions);
        }
        toggleClearButton(overlayInput.value, overlayClearButton);
      });
      overlayInput.addEventListener('input', (e) => {
        onInput(e, overlaySuggestions);
        toggleClearButton(overlayInput.value, overlayClearButton);
      });
      overlaySuggestions.addEventListener('mousedown', (e) => {
        e.preventDefault();
      });
      overlaySearchButton.addEventListener('click', () => doSearch(overlayInput.value.trim()));
      cancelButton.addEventListener('click', closeOverlay);
      overlayClearButton.addEventListener('click', () => {
        overlayInput.value = '';
        overlayInput.focus();
        renderSearchHistory(overlaySuggestions);
        overlayClearButton.classList.add('hidden');
      });

      function closeOverlay() { 
        overlay.style.display = 'none';
        mainInput.value = '';
        mainSuggestions.innerHTML = '';
        mainClearButton.classList.add('hidden');
        window.scrollTo(0, lastScrollPosition);
      }

      window.addEventListener('resize', () => {
        toggleClearButton(mainInput.value, mainClearButton);
        toggleClearButton(overlayInput.value, overlayClearButton);
      });
      
      const fixedSearchWrapper = document.getElementById('fixed-search-wrapper');
      const mainSearchContainer = document.getElementById('search-container-wrapper');
      
      const fixedInput = document.getElementById('search-input-fixed');
      const fixedClearButton = document.getElementById('clear-button-fixed');
      const fixedButton = document.getElementById('search-button-fixed');
      
      function handleScroll() {
        if (window.innerWidth <= 768) {
          const containerTop = mainSearchContainer.getBoundingClientRect().top;
          
          if (containerTop <= 0) {
            fixedSearchWrapper.classList.add('is-visible');
          } else {
            fixedSearchWrapper.classList.remove('is-visible');
          }
        } else {
          fixedSearchWrapper.classList.remove('is-visible');
        }
      }
      window.addEventListener('scroll', handleScroll);
      window.addEventListener('resize', handleScroll);

      fixedInput.addEventListener('focus', () => {
        openMobileSearchOverlay(fixedInput.value);
      });
      fixedInput.addEventListener('input', (e) => {
        toggleClearButton(fixedInput.value, fixedClearButton);
      });
      fixedClearButton.addEventListener('click', () => {
        fixedInput.value = '';
        fixedInput.focus();
        toggleClearButton(fixedInput.value, fixedClearButton);
      });
      fixedButton.addEventListener('click', () => doSearch(fixedInput.value.trim()));

      toggleClearButton(mainInput.value, mainClearButton);
      fetchWeather();
      fetchNews();
    });
  </script>
</body>
</html>
